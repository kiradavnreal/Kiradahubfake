-- Kirada Hub Script (Tối ưu hóa)
-- Tạo bởi Grok

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Thiết lập GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui
ScreenGui.Name = "KiradaHub"
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 300, 0, 450)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -225)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Visible = false
MainFrame.BackgroundTransparency = 1

local Shadow = Instance.new("ImageLabel")
Shadow.Size = UDim2.new(1, 20, 1, 20)
Shadow.Position = UDim2.new(0, -10, 0, -10)
Shadow.BackgroundTransparency = 1
Shadow.Image = "rbxassetid://1316045217"
Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
Shadow.ImageTransparency = 0.7
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(10, 10, 10, 10)
Shadow.Parent = MainFrame

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

local ScrollingFrame = Instance.new("ScrollingFrame")
ScrollingFrame.Size = UDim2.new(1, -20, 1, -20)
ScrollingFrame.Position = UDim2.new(0, 10, 0, 10)
ScrollingFrame.BackgroundTransparency = 1
ScrollingFrame.ScrollBarThickness = 4
ScrollingFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 255)
ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 500)
ScrollingFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.FillDirection = Enum.FillDirection.Vertical
UIListLayout.Padding = UDim.new(0, 10)
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout.Parent = ScrollingFrame

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(0, 260, 0, 40)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "Kirada Hub"
TitleLabel.TextColor3 = Color3.fromRGB(200, 200, 255)
TitleLabel.TextSize = 26
TitleLabel.Font = Enum.Font.GothamBlack
TitleLabel.Parent = ScrollingFrame

local MovementFrame = Instance.new("Frame")
MovementFrame.Size = UDim2.new(0, 260, 0, 100)
MovementFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
MovementFrame.BackgroundTransparency = 0.3
MovementFrame.Parent = ScrollingFrame

local MovementUICorner = Instance.new("UICorner")
MovementUICorner.CornerRadius = UDim.new(0, 8)
MovementUICorner.Parent = MovementFrame

local MovementLayout = Instance.new("UIListLayout")
MovementLayout.FillDirection = Enum.FillDirection.Vertical
MovementLayout.Padding = UDim.new(0, 10)
MovementLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
MovementLayout.Parent = MovementFrame

local SpeedLabel = Instance.new("TextLabel")
SpeedLabel.Size = UDim2.new(0, 240, 0, 20)
SpeedLabel.BackgroundTransparency = 1
SpeedLabel.Text = "Tốc độ (Tối đa 1000):"
SpeedLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
SpeedLabel.TextSize = 16
SpeedLabel.Font = Enum.Font.Gotham
SpeedLabel.Parent = MovementFrame

local SpeedTextBox = Instance.new("TextBox")
SpeedTextBox.Size = UDim2.new(0, 220, 0, 30)
SpeedTextBox.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
SpeedTextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedTextBox.TextSize = 16
SpeedTextBox.Font = Enum.Font.Gotham
SpeedTextBox.Text = "16"
SpeedTextBox.Parent = MovementFrame

local SpeedUICorner = Instance.new("UICorner")
SpeedUICorner.CornerRadius = UDim.new(0, 6)
SpeedUICorner.Parent = SpeedTextBox

local JumpLabel = Instance.new("TextLabel")
JumpLabel.Size = UDim2.new(0, 240, 0, 20)
JumpLabel.BackgroundTransparency = 1
JumpLabel.Text = "Nhảy (Tối đa 500):"
JumpLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
JumpLabel.TextSize = 16
JumpLabel.Font = Enum.Font.Gotham
JumpLabel.Parent = MovementFrame

local JumpTextBox = Instance.new("TextBox")
JumpTextBox.Size = UDim2.new(0, 220, 0, 30)
JumpTextBox.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
JumpTextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
JumpTextBox.TextSize = 16
JumpTextBox.Font = Enum.Font.Gotham
JumpTextBox.Text = "50"
JumpTextBox.Parent = MovementFrame

local JumpUICorner = Instance.new("UICorner")
JumpUICorner.CornerRadius = UDim.new(0, 6)
JumpUICorner.Parent = JumpTextBox

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 260, 0, 40)
ToggleButton.BackgroundColor3 = Color3.fromRGB(100, 100, 255)
ToggleButton.Text = "Bật/Tắt Script: TẮT"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 18
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.Parent = ScrollingFrame

local ToggleUICorner = Instance.new("UICorner")
ToggleUICorner.CornerRadius = UDim.new(0, 6)
ToggleUICorner.Parent = ToggleButton

local RunNoclipButton = Instance.new("TextButton")
RunNoclipButton.Size = UDim2.new(0, 260, 0, 40)
RunNoclipButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
RunNoclipButton.Text = "Chạy xuyên tường"
RunNoclipButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RunNoclipButton.TextSize = 18
RunNoclipButton.Font = Enum.Font.GothamBold
RunNoclipButton.Parent = ScrollingFrame

local RunNoclipUICorner = Instance.new("UICorner")
RunNoclipUICorner.CornerRadius = UDim.new(0, 6)
RunNoclipUICorner.Parent = RunNoclipButton

local RunNormalButton = Instance.new("TextButton")
RunNormalButton.Size = UDim2.new(0, 260, 0, 40)
RunNormalButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
RunNormalButton.Text = "Chạy không xuyên"
RunNormalButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RunNormalButton.TextSize = 18
RunNormalButton.Font = Enum.Font.GothamBold
RunNormalButton.Parent = ScrollingFrame

local RunNormalUICorner = Instance.new("UICorner")
RunNormalUICorner.CornerRadius = UDim.new(0, 6)
RunNormalUICorner.Parent = RunNormalButton

local StopRunButton = Instance.new("TextButton")
StopRunButton.Size = UDim2.new(0, 260, 0, 40)
StopRunButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
StopRunButton.Text = "Tắt chạy"
StopRunButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StopRunButton.TextSize = 18
StopRunButton.Font = Enum.Font.GothamBold
StopRunButton.Parent = ScrollingFrame

local StopRunUICorner = Instance.new("UICorner")
StopRunUICorner.CornerRadius = UDim.new(0, 6)
StopRunUICorner.Parent = StopRunButton

local WaterWalkButton = Instance.new("TextButton")
WaterWalkButton.Size = UDim2.new(0, 260, 0, 40)
WaterWalkButton.BackgroundColor3 = Color3.fromRGB(0, 188, 212)
WaterWalkButton.Text = "Đi trên nước: TẮT"
WaterWalkButton.TextColor3 = Color3.fromRGB(255, 255, 255)
WaterWalkButton.TextSize = 18
WaterWalkButton.Font = Enum.Font.GothamBold
WaterWalkButton.Parent = ScrollingFrame

local WaterWalkUICorner = Instance.new("UICorner")
WaterWalkUICorner.CornerRadius = UDim.new(0, 6)
WaterWalkUICorner.Parent = WaterWalkButton

local AntiAfkButton = Instance.new("TextButton")
AntiAfkButton.Size = UDim2.new(0, 260, 0, 40)
AntiAfkButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
AntiAfkButton.Text = "Anti AFK: TẮT"
AntiAfkButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AntiAfkButton.TextSize = 18
AntiAfkButton.Font = Enum.Font.GothamBold
AntiAfkButton.Parent = ScrollingFrame

local AntiAfkUICorner = Instance.new("UICorner")
AntiAfkUICorner.CornerRadius = UDim.new(0, 6)
AntiAfkUICorner.Parent = AntiAfkButton

local AutoWinButton = Instance.new("TextButton")
AutoWinButton.Size = UDim2.new(0, 260, 0, 40)
AutoWinButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
AutoWinButton.Text = "Auto Win Legends Of Speed: TẮT"
AutoWinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoWinButton.TextSize = 18
AutoWinButton.Font = Enum.Font.GothamBold
AutoWinButton.Parent = ScrollingFrame

local AutoWinUICorner = Instance.new("UICorner")
AutoWinUICorner.CornerRadius = UDim.new(0, 6)
AutoWinUICorner.Parent = AutoWinButton

local EspButton = Instance.new("TextButton")
EspButton.Size = UDim2.new(0, 260, 0, 40)
EspButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
EspButton.Text = "Bật định vị người chơi"
EspButton.TextColor3 = Color3.fromRGB(255, 255, 255)
EspButton.TextSize = 18
EspButton.Font = Enum.Font.GothamBold
EspButton.Parent = ScrollingFrame

local EspUICorner = Instance.new("UICorner")
EspUICorner.CornerRadius = UDim.new(0, 6)
EspUICorner.Parent = EspButton

local ToggleMenuButton = Instance.new("TextButton")
ToggleMenuButton.Size = UDim2.new(0, 60, 0, 60)
ToggleMenuButton.Position = UDim2.new(0, 10, 0, 10)
ToggleMenuButton.BackgroundColor3 = Color3.fromRGB(100, 100, 255)
ToggleMenuButton.Text = "☰"
ToggleMenuButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleMenuButton.TextSize = 28
ToggleMenuButton.Font = Enum.Font.GothamBold
ToggleMenuButton.Parent = ScreenGui

local ToggleMenuUICorner = Instance.new("UICorner")
ToggleMenuUICorner.CornerRadius = UDim.new(0, 30)
ToggleMenuUICorner.Parent = ToggleMenuButton

-- Biến
local isScriptEnabled = false
local originalSpeed = humanoid.WalkSpeed
local originalJump = humanoid.JumpPower
local noclipEnabled = false
local espEnabled = false
local waterWalkEnabled = false
local antiAfkEnabled = false
local autoWinEnabled = false
local connections = {}
local legendsOfSpeedPlaceId = 3101667897

-- Animation cho Menu
local function toggleMenu()
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Sine, MainFrame.Visible and Enum.EasingDirection.In or Enum.EasingDirection.Out)
    local targetSize = MainFrame.Visible and UDim2.new(0, 300, 0, 0) or UDim2.new(0, 300, 0, 450)
    local tween = TweenService:Create(MainFrame, tweenInfo, {BackgroundTransparency = MainFrame.Visible and 1 or 0, Size = targetSize})
    tween:Play()
    wait(0.3)
    MainFrame.Visible = not MainFrame.Visible
end

-- Hiệu ứng hover
local function addHoverEffect(button)
    local originalColor = button.BackgroundColor3
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {BackgroundColor3 = originalColor:Lerp(Color3.fromRGB(255, 255, 255), 0.2)}):Play()
    end)
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {BackgroundColor3 = originalColor}):Play()
    end)
end

addHoverEffect(ToggleButton)
addHoverEffect(RunNoclipButton)
addHoverEffect(RunNormalButton)
addHoverEffect(StopRunButton)
addHoverEffect(WaterWalkButton)
addHoverEffect(AntiAfkButton)
addHoverEffect(AutoWinButton)
addHoverEffect(EspButton)
addHoverEffect(ToggleMenuButton)

local function toggleScript()
    isScriptEnabled = not isScriptEnabled
    ToggleButton.Text = "Bật/Tắt Script: " .. (isScriptEnabled and "BẬT" or "TẮT")
    ToggleButton.BackgroundColor3 = isScriptEnabled and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(100, 100, 255)
    
    if not isScriptEnabled then
        humanoid.WalkSpeed = originalSpeed
        humanoid.JumpPower = originalJump
        disableNoclip()
        disableEsp()
        disableWaterWalk()
        disableAntiAfk()
        disableAutoWin()
    end
end

local function validateSpeed()
    local speed = tonumber(SpeedTextBox.Text) or originalSpeed
    speed = math.clamp(speed, 0, 1000)
    SpeedTextBox.Text = tostring(speed)
    return speed
end

local function validateJump()
    local jump = tonumber(JumpTextBox.Text) or originalJump
    jump = math.clamp(jump, 0, 500)
    JumpTextBox.Text = tostring(jump)
    return jump
end

local function enableNoclip()
    if noclipEnabled then return end
    noclipEnabled = true
    connections.noclip = RunService.Stepped:Connect(function()
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end)
end

local function disableNoclip()
    if not noclipEnabled then return end
    noclipEnabled = false
    if connections.noclip then
        connections.noclip:Disconnect()
        connections.noclip = nil
    end
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = true
        end
    end
end

local function enableWaterWalk()
    if waterWalkEnabled then return end
    waterWalkEnabled = true
    connections.waterWalk = RunService.Stepped:Connect(function()
        if character and humanoid then
            humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming, false)
            if humanoid:GetState() == Enum.HumanoidStateType.Swimming then
                rootPart.Velocity = Vector3.new(rootPart.Velocity.X, 0, rootPart.Velocity.Z)
                rootPart.Position = Vector3.new(rootPart.Position.X, rootPart.Position.Y + 0.1, rootPart.Position.Z)
            end
        end
    end)
end

local function disableWaterWalk()
    if not waterWalkEnabled then return end
    waterWalkEnabled = false
    if connections.waterWalk then
        connections.waterWalk:Disconnect()
        connections.waterWalk = nil
    end
    if humanoid then
        humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming, true)
    end
end

local function enableAntiAfk()
    if antiAfkEnabled then return end
    antiAfkEnabled = true
    spawn(function()
        while antiAfkEnabled and isScriptEnabled do
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            wait(30)
        end
    end)
end

local function disableAntiAfk()
    antiAfkEnabled = false
end

local function enableAutoWin()
    if autoWinEnabled or game.PlaceId ~= legendsOfSpeedPlaceId then
        if game.PlaceId ~= legendsOfSpeedPlaceId then
            warn("Không phải game Legends Of Speed!")
        end
        return
    end
    autoWinEnabled = true
    spawn(function()
        while autoWinEnabled and isScriptEnabled do
            if workspace:FindFirstChild("Orbs") then
                for _, orb in pairs(workspace.Orbs:GetChildren()) do
                    if orb:IsA("BasePart") then
                        rootPart.CFrame = orb.CFrame
                        wait(0.1)
                    end
                end
            end
            if workspace:FindFirstChild("Hoops") then
                for _, hoop in pairs(workspace.Hoops:GetChildren()) do
                    if hoop:IsA("BasePart") then
                        rootPart.CFrame = hoop.CFrame
                        wait(0.1)
                    end
                end
            end
            wait(1)
        end
    end)
end

local function disableAutoWin()
    autoWinEnabled = false
end

local function enableEsp()
    if espEnabled then return end
    espEnabled = true
    local function highlightPlayer(plr)
        if plr ~= player and plr.Character then
            local highlight = Instance.new("Highlight")
            highlight.FillColor = Color3.fromRGB(255, 0, 0)
            highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
            highlight.FillTransparency = 0.5
            highlight.OutlineTransparency = 0
            highlight.Parent = plr.Character
            connections[plr.Name] = highlight
        end
    end
    for _, plr in pairs(game.Players:GetPlayers()) do
        highlightPlayer(plr)
    end
    connections.playerAdded = game.Players.PlayerAdded:Connect(highlightPlayer)
end

local function disableEsp()
    if not espEnabled then return end
    espEnabled = false
    for _, plr in pairs(game.Players:GetPlayers()) do
        if plr ~= player and plr.Character and connections[plr.Name] then
            connections[plr.Name]:Destroy()
            connections[plr.Name] = nil
        end
    end
    if connections.playerAdded then
        connections.playerAdded:Disconnect()
        connections.playerAdded = nil
    end
end

-- Sự kiện
ToggleMenuButton.MouseButton1Click:Connect(toggleMenu)

ToggleButton.MouseButton1Click:Connect(toggleScript)

SpeedTextBox.FocusLost:Connect(function()
    if isScriptEnabled then
        humanoid.WalkSpeed = validateSpeed()
    end
end)

JumpTextBox.FocusLost:Connect(function()
    if isScriptEnabled then
        humanoid.JumpPower = validateJump()
    end
end)

RunNoclipButton.MouseButton1Click:Connect(function()
    if isScriptEnabled then
        humanoid.WalkSpeed = validateSpeed()
        humanoid.JumpPower = validateJump()
        enableNoclip()
    end
end)

RunNormalButton.MouseButton1Click:Connect(function()
    if isScriptEnabled then
        humanoid.WalkSpeed = validateSpeed()
        humanoid.JumpPower = validateJump()
        disableNoclip()
    end
end)

StopRunButton.MouseButton1Click:Connect(function()
    if isScriptEnabled then
        humanoid.WalkSpeed = originalSpeed
        humanoid.JumpPower = originalJump
        disableNoclip()
    end
end)

WaterWalkButton.MouseButton1Click:Connect(function()
    if isScriptEnabled then
        if waterWalkEnabled then
            disableWaterWalk()
            WaterWalkButton.Text = "Đi trên nước: TẮT"
            WaterWalkButton.BackgroundColor3 = Color3.fromRGB(0, 188, 212)
        else
            enableWaterWalk()
            WaterWalkButton.Text = "Đi trên nước: BẬT"
            WaterWalkButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        end
    end
end)

AntiAfkButton.MouseButton1Click:Connect(function()
    if isScriptEnabled then
        if antiAfkEnabled then
            disableAntiAfk()
            AntiAfkButton.Text = "Anti AFK: TẮT"
            AntiAfkButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
        else
            enableAntiAfk()
            AntiAfkButton.Text = "Anti AFK: BẬT"
            AntiAfkButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        end
    end
end)

AutoWinButton.MouseButton1Click:Connect(function()
    if isScriptEnabled then
        if autoWinEnabled then
            disableAutoWin()
            AutoWinButton.Text = "Auto Win Legends Of Speed: TẮT"
            AutoWinButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        else
            enableAutoWin()
            AutoWinButton.Text = "Auto Win Legends Of Speed: BẬT"
            AutoWinButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
        end
    end
end)

EspButton.MouseButton1Click:Connect(function()
    if isScriptEnabled then
        if espEnabled then
            disableEsp()
            EspButton.Text = "Bật định vị người chơi"
            EspButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
        else
            enableEsp()
            EspButton.Text = "Tắt định vị người chơi"
            EspButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
        end
    end
end)

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.E then
        toggleScript()
    elseif input.KeyCode == Enum.KeyCode.Q then
        toggleMenu()
    end
end)

player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
    originalSpeed = humanoid.WalkSpeed
    originalJump = humanoid.JumpPower
    if isScriptEnabled then
        humanoid.WalkSpeed = validateSpeed()
        humanoid.JumpPower = validateJump()
    else
        disableNoclip()
        disableEsp()
        disableWaterWalk()
        disableAntiAfk()
        disableAutoWin()
    end
end)

print("Kirada Hub tối ưu hóa và khởi động!")
